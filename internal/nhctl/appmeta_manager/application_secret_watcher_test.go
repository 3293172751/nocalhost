package appmeta_manager

import (
	"encoding/json"
	"fmt"
	"testing"
	"time"
)

var config = "apiVersion: v1\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJd01USXhNekExTlRnek4xb1hEVE13TVRJeE1UQTFOVGd6TjFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUFg0CncrL1JaYXl1UnExck9ISnBYZlZBOTZWdTdYVm5pQkhGMjBSdDhlMGt5azhUZzZaY0wybWgrUSs5OGVjMG9ucjQKZXFtT05SZFdaUFVSSnhPc0ZVbzh3dmJlK1JPRUdMdkUrY00wUWtBL3hWeHFGeFJWRkhIU1MxZE5HRm41enB0VgpZYkJXT20xbUJBVktZQlVkUnFEYWM1ckhYV3g2bmhUalRMRU5XOFUrak5HNENOVGNvWHFiSDUyUERoY0d6WjVICkJpUkdESmFpL3BnUHJCTkViYmZ2WHphSElZbWIvdHFWTmU1bmdNNlNRKzFEY1JHZDRxb3Q1RkdIMjlqeHBCc3gKbW5TZFlLbE9JRDBUTngxZGpTYTRNc3hPaDZ1VzFFcUcvTVEwVWE3a3lweHZlRW1yYU9SMnJEWjg2Tk5SRnR5UApvdlhOTUF6ektHSXRpZGE0MGI4Q0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZLUXVIL2xESzcrc3RPQXhvbXN5KzVxR1lVbHZNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFEUUhOM1BKVFRuUEJORm1RUFRadkhIZXNxVVJrTTJhRkhsQlZ5WlBwUDk4VHhKbUloagppVlEzYU5INTJOVi9rd0pVa1dJb0tPYXlxaXdmMFI1Mlgrd01xYlFhc2RxVWZCQXlHRGFzbGY2UWIrZE5FQzBnCkl3TUZjVmNrbUhTNk12SmJmSzVUN1pkVTJUVGFxbk8yZVdwcVBqZkpGbkxScHdGa1lST3RDcnNsN1JQdTRQV0sKQnIzT3B6d1FCWG9UUDZ6c1orNjRYbEJycTZ2bDJTUUVzb0dNRkcraVdENlM2enVJaVZUaWJXU2NibUpoeVJnaQphclV3NjZ0Zlg2V2w4UDFiaTIyUmlyVngzQzc3MC9oZWUzei9aL01aTytzbjJ5TDM0QTYvekpYZkFYeEg2NTVmCi9DcWpFNXhmcWRhSjh4ZHZMaVdZVXdnUjVQZ1V6OXlocklvegotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==\n    server: https://kubernetes.docker.internal:6443\n  name: docker-desktop\ncontexts:\n- context:\n    cluster: docker-desktop\n    user: docker-desktop\n  name: docker-desktop\ncurrent-context: docker-desktop\nkind: Config\npreferences: {}\nusers:\n- name: docker-desktop\n  user:\n    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURGVENDQWYyZ0F3SUJBZ0lJSVFRUUs0WjR3UW93RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TURFeU1UTXdOVFU0TXpkYUZ3MHlNakEwTURVd01qRTFNRGhhTURZeApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sc3dHUVlEVlFRREV4SmtiMk5yWlhJdFptOXlMV1JsCmMydDBiM0F3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ3N3bGEvTW9SdUlhbnYKRmg5UTFIaEtqRFJsZzBhN0V1dDdDb0k2ZythNEUreG95Wi92STBDQmt6MCtMUVY5ZlVSVzdDbEUvWG5ZWG0zRgp6QXJsaytmM21oTStuMDZSLzgwT1lLcHpWcjNRVFdvM3loNTNDTWdEM21kVnU4Qk5GV0VMWGxkRThGQzllekVwCnZVamZDRzRWOFlLVFIxM1V0WjlGQmIzZnRTeUZTeXhSdm1OaGhyWVg4a2k1NUhHeVMrYUlzZlh1NEEyZ2hMc3oKRHJ0eGp2c09iOVZzZVIzcEoxSjZvMWIyalNCYW1vZ2c0dVRNaWxYTlFFTG5ndUpoVkNUNWY4SkNOc0JxWitxbAorbHA0UU1KKzNieHdXRmZTd3ZlRFNNYTFMQzlZb3RYb1JSSGFyQ1hjUXBXT0FDZnpMN0pxQSt0UWQ0b2tlMlNTCnJ4NXpMZmFoQWdNQkFBR2pTREJHTUE0R0ExVWREd0VCL3dRRUF3SUZvREFUQmdOVkhTVUVEREFLQmdnckJnRUYKQlFjREFqQWZCZ05WSFNNRUdEQVdnQlNrTGgvNVF5dS9yTFRnTWFKck12dWFobUZKYnpBTkJna3Foa2lHOXcwQgpBUXNGQUFPQ0FRRUFzc0NqSEx2SVQxb0dVcmpRR29RTFhDaVBFNHFqL2N2NG5jOTlGNFFFcVZxWjl3cWVlNnVvCnl5dC9tRHVrejNaN0RpcG96V1J1N3VBeVFoWjZ5WlVMbUdZaFJ2OEVLSHVxVVdhWHdkK0FlaXBoNFc0Tzl0VVYKWXRFQzd5SXY0N2tWS1JWYVpxN0w3WUtYa2tzbmk1bmE4NXZlUnJzZTBoQ2VwTVpmc2RobHRxRUYwSlAyeEFrVApIYnZ3a2g4SGUyWkNrZm14bDRHY0VxaG9vSXBRMnBqMXd4UmIzUjgyQXB5dlkvMVJKdkIrcnZWQVlucEw4bDd6CmZHT1M1cmpFS2Vyb2JkUFdCbzVwQVo2UnVZTm5MZnhkL0RxYXFLS2wzd0tPcDJjRnVuZUs4RXUzZzZlUkE4RGQKeERoTGNhbnk4M3BLcW5FdEJhS2dUNE9XWEp6Ti9vUEdOQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBck1KV3Z6S0ViaUdwN3hZZlVOUjRTb3cwWllOR3V4THJld3FDT29QbXVCUHNhTW1mCjd5TkFnWk05UGkwRmZYMUVWdXdwUlAxNTJGNXR4Y3dLNVpQbjk1b1RQcDlPa2YvTkRtQ3FjMWE5MEUxcU44b2UKZHdqSUE5NW5WYnZBVFJWaEMxNVhSUEJRdlhzeEtiMUkzd2h1RmZHQ2swZGQxTFdmUlFXOTM3VXNoVXNzVWI1agpZWWEyRi9KSXVlUnhza3ZtaUxIMTd1QU5vSVM3TXc2N2NZNzdEbS9WYkhrZDZTZFNlcU5XOW8wZ1dwcUlJT0xrCnpJcFZ6VUJDNTRMaVlWUWsrWC9DUWpiQWFtZnFwZnBhZUVEQ2Z0MjhjRmhYMHNMM2cwakd0U3d2V0tMVjZFVVIKMnF3bDNFS1ZqZ0FuOHkreWFnUHJVSGVLSkh0a2txOGVjeTMyb1FJREFRQUJBb0lCQUVnalptRzBVSVJFWGxkTgpuNG43RHJmaVQ4Ykx5Rzg1ZVVjSm5sT2MzR3lsTlNTVWZNbzRxQ2p6T0xHTHp5MFZiOEgwSDArRm9LbHUxTnV4ClZpT0RYV3VRMU5SalpVV2wwUlJkM1E4SWUzNU50VHJTbFdJVE1xSWE3bjlvUk9ack5QaXdUalNsUExIQ2pVYm0KbVZVNGllOXp4NWlFUm5RWjJ3WFJYZlhhQzFzazF3ZFNtNnNVcCs1aG91TlpDVUc3dmZyLzByankyVWt4ZnI0RQp2QWhNbFFVei9ZWURsR2JHSEpaS1ZlSUFRdnNHWm8rSG5NREhxUHVEY0VvU2g1QjlmM3VHU3crSHdKeXdMNkpUCk9vQ0cvNnBHRFpsempWc1Q3cXlDaGFuSzVUMjBGVjBQYUpiUTRyTE1qcEVnU2dXdWJiVXUySzdRWGkvazcrdTIKQ2xiL25JRUNnWUVBeTliaXVTb09jVE45YjZPV1Q0VXowWUNuRC81bFJpRmY2SEZ3ZFI4bmVvdEVVNmR3UXR0bQp6UVBLNmNIS3Q3SjFET1FCSUc3bnFWRFgvZE1rdmVJZENUaktGQjZQWWJnUEQ0OUp0c1haK3c2a04yL29vWVJoCmxwYW43VzJDY2JJcU94R3lBTmVDeXJLV0NGcFZjc2ZKS1dScDlucGZ4RHdqSE55VE83dzc5bmtDZ1lFQTJQZHkKYnl4Q2hzSWcreGR0c01XSFN3NmNoQUhtNnNnM0dsZkVBczhUNEtsbkE3bUpaMW9RQ3NPN2NiWSsxZU4valZTVgp4Rnl5TkdySGR3QXNOZkYybTdKSmNQRlJhdmREemdaVWVDNWttMko1MSswWlRnaDRYKzI0a2hHNEFhSnE0WUxxCjhwSDB5WkhSTlloa3VWZU01U1o4dTlBNkhUUDFIMC9UUmk2NUYya0NnWUVBeVQ0SGJJTm02ci9JOFRUeUt1UDQKK3Jjbk9KVVI2eUQ4RFFJaDRwKzFYRGl1Wm1DQ1pwOHhhT3A3cERpZEtLclpBTGNCbmNHZ21QcWxvNFNYVzVnbQp6bm53bDlocitpKzdQc05hSlVaRUpLYVozZGx3TkRYOEdxMzJjR09UU3loNHBRU2RWbE51WHl2ZEQ3WVBjbGhuCjg2T2RNYWd6Y0F0bkp4RmxrcTRPRFJFQ2dZRUExR1hoRzk1TFBocjdLSE8yQ1RCR0V2ODV6NjBBL3VTRHRRRW8KUE11MW5PQ1puVGJid1ZhVWo4VXZVZEZrVUFVSEVEYzI2bVVJZTNIdzFKbFJybmswY0pVbmVpNXpVdkMrNndpZApWbzJzSmNWUW5FWmEyRjVJWVRpWjBEMFNVbDlLbkh1S1AyOE5JT3JqMExFMlVZN1l1bGRrRW9SMDc3TzJpakdlCkZYMlY2c2tDZ1lFQWhzU21HTnJZS2Fmbm85eHpSSDVteEhrU3lWQVMzeWYvZ1hXZ2xLZC9iTHNtcDdKTUd1bmcKRTVPMFVBdzd6NHBWcHVTdkU5cmtKcFpKcDgyb3hOUDQrd3gwaUJBeERIU1JZbTdpRkFremFKNW9STEcrOVRLdQoyVG5GN0pXbS9vVU9hRUNJRjFtamF3UFU4QWdZYmZ6cGdFU1UyYmRCaFNkZTN4emtnc2M5UVNBPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="

func TestForWatch(t *testing.T) {
	Run()
	for i := 0; i < 10000; i++ {
		time.Sleep(time.Second)

		meta := GetApplicationMetas("default", config)
		marshal, _ := json.Marshal(meta)
		_ = fmt.Sprintf("meta: %s\n", string(marshal))
		//
		//uns := &appmeta.ApplicationMeta{}
		//json.Unmarshal(marshal, uns)
		//fmt.Sprintf("")
	}
}
